{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n    const id = (name) => document.getElementById(name);\n\n    /* --- 1. ИКОНКИ (Lucide) --- */\n    if (typeof lucide !== 'undefined') lucide.createIcons();\n\n    /* --- 2. ПЛАВНЫЙ СКРОЛЛ (Lenis) --- */\n    const lenis = new Lenis();\n    function raf(time) {\n        lenis.raf(time);\n        requestAnimationFrame(raf);\n    }\n    requestAnimationFrame(raf);\n\n    /* --- 3. ХЕДЕР И МОБИЛЬНОЕ МЕНЮ --- */\n    const header = id('header');\n    const burger = id('burger-menu');\n    const navOverlay = id('nav-overlay');\n    const originalNav = document.querySelector('.nav__list');\n\n    if (header) {\n        window.addEventListener('scroll', () => {\n            header.classList.toggle('header--scrolled', window.scrollY > 50);\n        });\n    }\n\n    if (burger && navOverlay && originalNav) {\n        navOverlay.innerHTML = `<ul class=\"nav__list\">${originalNav.innerHTML}</ul>`;\n        const toggleMenu = () => {\n            burger.classList.toggle('burger--active');\n            navOverlay.classList.toggle('nav-overlay--active');\n            document.body.style.overflow = navOverlay.classList.contains('nav-overlay--active') ? 'hidden' : '';\n        };\n        burger.addEventListener('click', toggleMenu);\n        navOverlay.addEventListener('click', (e) => {\n            if (e.target.closest('.nav__link')) toggleMenu();\n        });\n    }\n\n    /* --- 4. ФОН THREE.JS (Hero) --- */\n    const heroBg = id('hero-bg-canvas');\n    if (heroBg && typeof THREE !== 'undefined') {\n        const scene = new THREE.Scene();\n        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n        renderer.setSize(window.innerWidth, window.innerHeight);\n        heroBg.appendChild(renderer.domElement);\n\n        const geometry = new THREE.PlaneGeometry(25, 25, 50, 50);\n        const material = new THREE.PointsMaterial({ color: 0x00F0FF, size: 0.04, transparent: true, opacity: 0.4 });\n        const particles = new THREE.Points(geometry, material);\n        scene.add(particles);\n        camera.position.z = 6;\n        particles.rotation.x = 1.2;\n\n        const animate = () => {\n            requestAnimationFrame(animate);\n            const pos = particles.geometry.attributes.position.array;\n            const time = Date.now() * 0.0005;\n            for (let i = 0; i < pos.length; i += 3) {\n                pos[i + 2] = Math.sin(pos[i] * 1.5 + time) * 0.3;\n            }\n            particles.geometry.attributes.position.needsUpdate = true;\n            renderer.render(scene, camera);\n        };\n        animate();\n    }\n\n    /* --- 5. АККОРДЕОН (Native JS) --- */\n    const accordionItems = document.querySelectorAll('.accordion-item');\n    accordionItems.forEach(item => {\n        const header = item.querySelector('.accordion-header');\n        header.addEventListener('click', () => {\n            const isOpen = item.classList.contains('active');\n            accordionItems.forEach(i => {\n                i.classList.remove('active');\n                i.querySelector('.accordion-content').style.height = '0px';\n            });\n            if (!isOpen) {\n                item.classList.add('active');\n                const content = item.querySelector('.accordion-content');\n                content.style.height = content.scrollHeight + 'px';\n            }\n        });\n    });\n\n    /* --- 6. ПОЯВЛЕНИЕ ЭЛЕМЕНТОВ ПРИ СКРОЛЛЕ (Взамен GSAP) --- */\n    const observerOptions = { threshold: 0.1 };\n    const observer = new IntersectionObserver((entries) => {\n        entries.forEach(entry => {\n            if (entry.isIntersecting) {\n                entry.target.classList.add('reveal--active');\n            }\n        });\n    }, observerOptions);\n\n    // Добавляем класс reveal всем карточкам преимуществ и блога\n    document.querySelectorAll('.benefit-card, .blog-card, .strategy-card').forEach(card => {\n        card.classList.add('reveal');\n        observer.observe(card);\n    });\n\n    /* --- 7. ФОРМА И КАПЧА --- */\n    const form = id('career-form');\n    if (form) {\n        const cLabel = id('captcha-question'), cInput = id('captcha-answer');\n        const sMsg = id('form-success'), eMsg = id('form-error');\n        let n1, n2, res;\n\n        const gen = () => {\n            n1 = Math.floor(Math.random() * 9) + 1;\n            n2 = Math.floor(Math.random() * 9) + 1;\n            res = n1 + n2;\n            if (cLabel) cLabel.textContent = `${n1} + ${n2} = ?`;\n        };\n        gen();\n\n        id('phone').addEventListener('input', (e) => e.target.value = e.target.value.replace(/[^0-9]/g, ''));\n        form.addEventListener('submit', (e) => {\n            e.preventDefault();\n            sMsg.style.display = eMsg.style.display = 'none';\n            if (parseInt(cInput.value) !== res) {\n                eMsg.style.display = 'block'; return;\n            }\n            const btn = id('submit-btn');\n            btn.disabled = true; btn.textContent = 'Отправка...';\n            setTimeout(() => {\n                btn.disabled = false; btn.innerHTML = '<span>Запросить доступ</span>';\n                sMsg.style.display = 'block'; form.reset(); gen();\n                if (typeof lucide !== 'undefined') lucide.createIcons();\n            }, 1500);\n        });\n    }\n\n    /* --- 8. COOKIE POPUP --- */\n    const cp = id('cookie-popup'), cb = id('cookie-accept');\n    if (cp && cb) {\n        if (!localStorage.getItem('stream_cookie_accept')) {\n            setTimeout(() => cp.classList.add('cookie-popup--show'), 2000);\n        }\n        cb.addEventListener('click', () => {\n            localStorage.setItem('stream_cookie_accept', 'true');\n            cp.classList.remove('cookie-popup--show');\n        });\n    }\n});"],"names":["id","name","lenis","raf","time","header","burger","navOverlay","originalNav","toggleMenu","e","heroBg","scene","camera","renderer","geometry","material","particles","animate","pos","accordionItems","item","isOpen","i","content","observerOptions","observer","entries","entry","card","form","cLabel","cInput","sMsg","eMsg","n1","n2","res","gen","btn","cp","cb"],"mappings":"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"}